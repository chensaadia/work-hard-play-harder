(function(){function Ball(e,t,i){this.type="ball",this.cordinate=JSON.parse(JSON.stringify(e));var a=0==t.x&&0==t.y?i:t;this.movement=JSON.parse(JSON.stringify(a)),this.speed=4,this.size=5,this.movement.x*=this.speed,this.movement.y*=this.speed,this.ball=document.createElement("div"),this.ball.className="ball",document.getElementById("game_container").append(this.ball),this.sound(["ehei.wav","mmm.wav","chen.ogg","deff.mp3","kick.mp3"]),this.update()}function Friend(e,t){this.type="friend",this.cordinate=JSON.parse(JSON.stringify(e)),this.movement={x:0,y:0},this.speed=2,this.size=20,this.heal=!1,this.count=Math.floor(50*Math.random()+1),this.movement.x*=this.speed,this.movement.y*=this.speed,this.friend=document.createElement("div"),this.friend.className="friend",document.getElementById("game_container").append(this.friend),this.gameObjects=t,this.changeDirection(),this.update()}function Hud(e,t,i){this.type="hud",this.cordinate=JSON.parse(JSON.stringify(e)),this.friends=t,this.player=i,this.speed=5,this.movement={x:0,y:0},this.hudFriends=[],this.hud=document.getElementById("hud"),this.updateFriendFlag=!1,this.score=document.getElementById("score-box"),this.hud.style.top=e.y+"px",this.hud.style.left=e.x+"px"}function getFriends(){return{sh:{name:"Shimri",size:30,image:{name:"shimron.png",x:30,y:32},message_id:1},tz:{name:"tzahi",size:30,image:{name:"tzahi.png",x:60,y:42},message_id:2},si:{name:"Shai",size:30,image:{name:"shai.png",x:30,y:38},message_id:3},tm:{name:"Tamir",size:30,image:{name:"tamir.png",x:30,y:38},message_id:4},me:{name:"Meir",size:30,image:{name:"meir.png",x:26,y:38},message_id:5},ro:{name:"Roman",size:30,image:{name:"roman.png",x:26,y:38},message_id:6},ol:{name:"Orly",size:30,image:{name:"orly.png",x:36,y:63},message_id:7},db:{name:"Debora",size:30,image:{name:"debora.png",x:36,y:63},message_id:7},di:{name:"Diago",size:30,image:{name:"diago.png",x:30,y:32},message_id:8},al:{name:"Alik",size:30,image:{name:"alik.png",x:26,y:38},message_id:9},yn:{name:"Yana",size:30,image:{name:"yana.png",x:35,y:38},message_id:9},dv:{name:"David",size:30,image:{name:"david.png",x:30,y:38},message_id:9},id:{name:"Idan",size:30,image:{name:"idan.png",x:31,y:38},message_id:9},or:{name:"Or",size:30,image:{name:"or.png",x:29,y:48},message_id:9},dn:{name:"Dan",size:30,image:{name:"dan.png",x:31,y:40},message_id:9}}}function getMap(){for(var e=20,t="player",i="trigger",a=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,3,2,2,3,3,3,9,3,3,3,1,2,2,3,3,3,3,9,3,3,3,3,3,3,1,2,2,2,2,3,3,3,i,1,0,0,0,0,1,i,22,22,22,22,22,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,7,3,11,2,3,3,3,3,3,3,3,1,2,12,"di",3,3,3,3,3,3,3,3,3,3,1,2,14,2,2,3,3,3,3,1,0,0,0,0,1,22,22,22,22,23,22,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,"tz",3,2,2,3,3,2,2,13,2,2,1,2,2,3,3,2,2,13,2,3,3,3,3,3,1,3,10,3,3,9,3,3,3,1,0,0,0,0,1,22,22,22,22,22,22,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,3,2,15,3,3,2,2,2,2,2,1,2,2,3,3,2,2,2,2,3,2,2,3,3,1,3,3,3,3,3,3,3,3,1,0,0,0,0,1,22,22,22,22,23,22,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,3,3,3,3,3,3,3,3,3,3,1,3,3,3,3,3,3,3,3,3,2,12,8,"sh",1,3,3,2,2,13,2,3,3,0,0,0,0,0,1,22,22,22,22,22,22,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,3,3,3,3,3,3,3,3,3,0,0,0,3,3,3,3,3,3,3,3,2,2,3,3,1,3,3,15,2,2,2,3,3,0,0,0,0,0,1,22,22,22,22,23,22,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,22,22,22,22,22,22,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,3,3,3,3,3,9,"ol",3,2,3,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,22,22,22,22,22,22,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,0,0,1],[1,3,3,3,3,3,3,3,3,2,3,3,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,22,22,1,1,1,1,1,1,1,1,1,t,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,14,2,2,12,17,0,1],[1,3,3,3,15,2,13,2,2,15,3,3,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,22,22,1,22,22,22,22,22,1,22,22,22,22,1,22,22,22,22,1,1,1,1,0,0,0,21,21,21,21,21,21,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,19,"dn",2,2,0,0,1],[1,3,3,3,2,2,2,2,2,2,3,3,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,22,22,1,22,22,22,22,22,1,22,22,22,22,1,22,22,22,22,1,1,1,1,0,0,0,21,21,21,21,21,21,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,2,2,0,0,1],[1,1,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,22,22,1,22,22,22,22,22,1,22,22,22,22,1,22,22,22,22,1,1,1,1,0,0,0,21,21,21,21,21,21,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,i,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,22,22,1,1,22,22,1,1,1,1,22,22,1,1,1,22,22,1,1,1,1,1,0,0,0,21,21,21,21,21,21,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1],[1,2,2,3,3,3,9,3,3,3,3,3,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,2,15,0,0,0,0,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,0,0,0,21,21,21,21,21,21,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1],[1,2,12,8,3,3,"al",3,3,3,3,3,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,7,3,11,2,0,0,0,0,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,0,0,0,21,21,21,21,21,21,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1],[1,2,2,"ro",3,2,13,2,2,2,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,2,2,0,0,0,0,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,0,0,0,21,21,21,21,21,21,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,18,0,2,2,0,0,1],[1,2,2,3,3,2,2,2,2,2,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,2,2,0,0,0,0,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,0,0,0,21,21,21,21,21,21,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,2,12,17,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,2,2,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,13,2,2,2,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,2,15,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,0,i,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,18,0,0,0,0,0,0,0,0,0,0,1,"me",9,3,3,3,3,3,9,"tm",3,1,2,2,3,3,3,3,3,9,"id",3,1,1,"hud",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,1,2,2,"dv",3,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,16,0,2,2,2,17,0,0,1,0,0,0,0,1,2,13,2,2,3,3,2,13,2,2,1,2,12,8,3,3,3,2,13,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,2,2,2,0,0,0,1,0,0,0,0,1,2,2,2,2,3,3,2,2,2,2,1,2,2,3,3,3,3,2,2,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,16,0,2,15,2,17,0,0,1,0,0,0,0,1,2,12,8,3,3,3,3,3,3,3,1,2,2,3,3,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,2,15,2,0,0,0,1,0,0,0,0,1,2,2,3,3,3,3,3,3,3,3,1,3,3,3,3,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,16,0,2,2,2,17,0,0,1,0,0,0,0,1,2,2,2,2,3,3,3,3,3,3,1,3,3,3,3,3,3,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,2,2,2,0,0,0,1,0,0,0,0,1,2,14,2,2,3,3,3,3,3,3,1,3,3,3,1,1,1,1,2,2,15,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,19,0,0,0,0,0,1,0,0,0,0,1,3,"si",3,3,3,3,3,3,3,3,1,3,3,3,1,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,1,3,3,3,1,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,0,0,1,1,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,2,2,3,i,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,2,2,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,2,12,8,"or",1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,2,2,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,2,2,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,2,2,2,3,3,3,3,3,2,2,2,3,3,3,3,2,2,12,3,3,3,3,2,2,2,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,7,3,11,2,2,3,3,3,7,3,11,2,12,8,3,7,3,11,2,2,8,3,7,3,11,2,12,8,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,i,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,2,2,12,3,3,3,3,3,2,2,2,3,3,3,3,2,2,2,3,3,3,3,2,2,2,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,"db",7,3,11,2,"yn",8,3,3,7,3,11,2,12,8,3,7,3,11,2,2,3,3,3,3,2,2,2,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,20,2,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,2,2,12,3,3,3,3,3,2,2,2,3,3,3,3,2,2,2,3,3,3,3,2,2,2,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,2,2,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,2,2,2,8,3,3,7,3,11,2,12,8,3,7,3,11,2,12,8,3,7,3,11,2,12,8,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,2,12,8,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,i,3,3,3,2,2,2,3,3,3,3,3,2,2,2,3,3,3,3,2,2,2,3,3,3,3,2,2,2,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,2,2,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],s=[],n=0;n<a.length;n++)for(var o=0;o<a[n].length;o++){var r=a[n][o];if(6<a[n][o]||"string"==typeof a[n][o])switch(a[n][o]){case 7:case 8:case 9:case 10:case"sh":case"tz":case i:case"di":case"si":case"tm":case"ro":case"me":case"ol":case"db":case"al":case"yn":case"dn":case"or":case"id":case"dv":a[n][o]=3;break;case 11:case 12:case 13:case 14:case 15:case 20:a[n][o]=2;break;case 16:case 17:case 18:case 19:case 21:case 22:case"hud":a[n][o]=0;break;case t:a[n][o]=1;break;case 23:a[n][o]=4}for(var d=0;d<e;d++){void 0===s[n*e+d]&&(s[n*e+d]=[]);for(var h=0;h<e;h++)s[n*e+d][o*e+h]=n*e+d==n*e&&o*e+h==o*e?r:a[n][o]}}return s}function Player(e,t,i){this.movement={x:0,y:0},this.cordinate=e||{x:50,y:50},this.size=30,this.speed=2,this.player=document.getElementsByTagName("mainActor")[0],this.type="player",this.update(),this.stamp=Date.now(),this.heal=0,this.score=0}function ShortMessage(){this.message=document.getElementById("short_message"),this.img=document.getElementById("short_message_img"),this.text=document.getElementById("short_message_box"),this.message.style.display="none",ShortMessage.isShow=!1}function BombSound(e,t){BombSound.active=!0,this.type="bomb",this.gameObjects=t,this.cordinate=JSON.parse(JSON.stringify(e)),this.startSize=25,this.size=this.startSize,this.speed=5,this.movement={x:0,y:0},this.maxSize=200,this.ball=document.createElement("div"),this.ball.className="bomb-sound",this.ball.innerHTML="o",this.ball.style.lineHeight=this.size+"px",document.getElementById("game_container").append(this.ball),this.update(),this.sound(["eifoanimegiamipo.wav","einlimusagmaolehkan.wav","tambin.wav","lemaanimashkia2.wav","duck.ogg"])}function WN(e){this.type="ai",this.cordinate=JSON.parse(JSON.stringify(e)),this.movement={x:0,y:0},this.speed=2,this.size=20,this.movement.x*=this.speed,this.movement.y*=this.speed,this.wn=document.createElement("div"),this.wn.className="wn",document.getElementById("game_container").append(this.wn),this.changeDirection(),this.update()}function WNTrigger(e,t,i){this.type="trigger",this.aggression=i,this.gameObjects=t,this.movement={x:0,y:0},this.cordinate=JSON.parse(JSON.stringify(e)),this.wn=document.createElement("div"),this.wn.className="trigger",document.getElementById("game_container").append(this.wn)}Ball.prototype.update=function(){this.cordinate.x+=this.movement.x,this.cordinate.y+=this.movement.y,this.ball.style.left=this.cordinate.x+"px",this.ball.style.top=this.cordinate.y+"px"},Ball.prototype.colider=function(e,t){},Ball.prototype.remove=function(){this.ball.remove()},Ball.prototype.sound=function(e){void 0!==this.sound_rec&&null!=this.sound_rec||(this.sound_rec=document.createElement("audio")),this.sound_rec.pause(),this.sound_rec.src="sound/"+e[Math.floor(Math.random()*e.length)],this.sound_rec.play()},Friend.prototype.setImg=function(e){this.image=e,this.friend.style.backgroundImage="url(img/"+e.name+")",this.friend.style.width=e.x,this.friend.style.height=e.y},Friend.prototype.fired=function(){!this.heal&&this.count<=50&&this.count++},Friend.prototype.updateHealPoint=function(e){if(this.heal)return e;var t=this.count-e;return t<=0?(this.heal=!0,this.count=0,Math.abs(t)):(this.count=t,0)},Friend.prototype.update=function(e){if(e||this.currentStep>this.maxSteps)return this.changeDirection();this.currentStep+=this.movement.x||this.movement.y,this.cordinate.x+=this.movement.x,this.cordinate.y+=this.movement.y,this.friend.style.left=this.cordinate.x+"px",this.friend.style.top=this.cordinate.y+"px",1==Math.floor(1e3*Math.random()+1)&&this.gameObjects.length<maxObject&&this.gameObjects.push(new WN(this.cordinate))},Friend.prototype.changeDirection=function(){if(this.movement.y=Math.floor(2*Math.random())*this.speed*(0==Math.floor(2*Math.random())?1:-1),this.movement.x=Math.floor(2*Math.random())*this.speed*(0==Math.floor(2*Math.random())?1:-1),0==this.movement.y&&0==this.movement.x)return this.changeDirection();this.currentStep=0,this.maxSteps=100*Math.floor(10*Math.random()+1)},Friend.prototype.colider=function(e,t){return e>=this.cordinate.x&&e<this.cordinate.x+this.size&&t>=this.cordinate.y&&t<this.cordinate.y+this.size},Friend.prototype.remove=function(){this.friend.remove()},Friend.prototype.sound=function(e){void 0!==this.sound_rec&&null!=this.sound_rec||(this.sound_rec=document.createElement("audio")),this.sound_rec.pause(),this.sound_rec.src="sound/"+e[Math.floor(Math.random()*e.length)],this.sound_rec.play()},Hud.prototype.updateFriends=function(){for(var e in this.friends)if(this.friends.hasOwnProperty(e)){var t=this.friendObject(this.friends[e]);this.friends[e].div=t,this.hud.append(t.div)}this.player.div=document.getElementById("player-heal")},Hud.prototype.update=function(){for(var e in this.updateFriendFlag||(this.updateFriendFlag=!0,this.updateFriends()),this.player.div.innerHTML=this.player.heal,this.score.innerHTML=this.player.score,this.friends)this.friends.hasOwnProperty(e)&&((e=this.friends[e]).heal?"heal"!=e.flag&&(e.flag="heal",e.div.div.className+=" blue",e.div.heal.innerHTML="HEAL",this.player.addScore(20)):48<e.count?"sick"!=e.flag&&(e.div.div.className+=" red",e.flag="sick",e.div.heal.innerHTML="SICK",this.player.addScore(-50)):("live"!=e.flag&&(e.div.div.className="hud-friend",e.flag="live"),e.div.heal.innerHTML=e.count))},Hud.prototype.friendObject=function(e){var t=document.createElement("div");t.id=e.name,t.className="hud-friend";var i=document.createElement("div");i.className="hud-friend-image",i.innerHTML="<img src ='img/"+e.image.name+"'></div>";var a=document.createElement("div");a.className="hud-friend-title",a.innerHTML=e.name;var s=document.createElement("div");return s.className="hud-friend-heal",s.innerHTML=e.count,t.append(i),t.append(a),t.append(s),{div:t,image:i,title:a,heal:s}},Player.prototype.left=function(){this.movement.x=-this.speed},Player.prototype.right=function(){this.movement.x=this.speed},Player.prototype.up=function(){this.movement.y=-this.speed},Player.prototype.down=function(){this.movement.y=this.speed},Player.prototype.addScore=function(e){this.score+=e,this.score<0&&(this.score=0)},Player.prototype.update=function(){this.cordinate.x+=this.movement.x,this.cordinate.y+=this.movement.y,this.player.style.left=this.cordinate.x+"px",this.player.style.top=this.cordinate.y+"px",2e3<=Date.now()-this.stamp&&this.heal<49&&(this.heal++,this.stamp=Date.now())},Player.prototype.colider=function(e,t){return e>=this.cordinate.x&&e<this.cordinate.x+this.size&&t>=this.cordinate.y&&t<this.cordinate.y+this.size},ShortMessage.prototype.isShow=!1,ShortMessage.prototype.show=function(e){if(!ShortMessage.isShow){this.img.src="img/"+e,this.text.innerHTML=this.genrateText(),ShortMessage.isShow=!0,this.sound(["lechtishtelava.wav","wallakyofi.wav","zemasheataosepo.wav","chen2.mp3"]);var t=this.message;this.message.style.display="block",setTimeout(function(){ShortMessage.isShow=!1,t.style.display="none"},5e3)}},ShortMessage.prototype.genrateText=function(){var e=["איפה תלך?!","תאמין לי אל תאמין לאף אחד","חבוב!","זה פשוט","אין לי כוח לעבוד","עזוב אותי אני בהודו","בא לכם ריבר?","מה אוכלים היום?","נא לא להאכיל את האינטגרטורים!"];return e[Math.floor(Math.random()*e.length)]},ShortMessage.prototype.sound=function(e){void 0!==this.sound_rec&&null!=this.sound_rec||(this.sound_rec=document.createElement("audio")),this.sound_rec.pause(),this.sound_rec.src="sound/"+e[Math.floor(Math.random()*e.length)],this.sound_rec.play()},BombSound.active=!1,BombSound.prototype.update=function(){this.size<this.maxSize?this.size+=this.speed:this.remove();var e=(this.size-this.startSize)/2;this.ball.style.left=this.cordinate.x-e+"px",this.ball.style.top=this.cordinate.y-e+"px",this.ball.style.width=this.size+"px",this.ball.style.height=this.ball.style.width,this.ball.style.lineHeight=this.size+"px"},BombSound.prototype.colider=function(e){var t=(this.size-this.startSize)/2,i=this.cordinate.x-t,a=this.cordinate.y-t;return e.cordinate.x>=i&&e.cordinate.x<i+this.size&&e.cordinate.y>=a&&e.cordinate.y<a+this.size},BombSound.prototype.remove=function(){this.ball&&this.ball.remove(),this.gameObjects.splice(gameObjects.indexOf(this),1),BombSound.active=!1},BombSound.prototype.sound=function(e){void 0!==this.sound_rec&&null!=this.sound_rec||(this.sound_rec=document.createElement("audio")),this.sound_rec.pause(),this.sound_rec.src="sound/"+e[Math.floor(Math.random()*e.length)],this.sound_rec.play()},WN.prototype.update=function(e){if(e||this.currentStep>this.maxSteps)return this.changeDirection();this.currentStep+=this.movement.x||this.movement.y,this.cordinate.x+=this.movement.x,this.cordinate.y+=this.movement.y,this.wn.style.left=this.cordinate.x+"px",this.wn.style.top=this.cordinate.y+"px"},WN.prototype.changeDirection=function(){if(this.movement.y=Math.floor(2*Math.random())*this.speed*(0==Math.floor(2*Math.random())?1:-1),this.movement.x=Math.floor(2*Math.random())*this.speed*(0==Math.floor(2*Math.random())?1:-1),0==this.movement.y&&0==this.movement.x)return this.changeDirection();this.currentStep=0,this.maxSteps=100*Math.floor(10*Math.random()+1)},WN.prototype.colider=function(e,t){return e>=this.cordinate.x&&e<this.cordinate.x+this.size&&t>=this.cordinate.y&&t<this.cordinate.y+this.size},WN.prototype.remove=function(){this.wn.remove()},WN.prototype.sound=function(e){void 0!==this.sound_rec&&null!=this.sound_rec||(this.sound_rec=document.createElement("audio")),this.sound_rec.pause(),this.sound_rec.src="sound/"+e[Math.floor(Math.random()*e.length)];var t=this.sound_rec;setTimeout(function(){t.play()},5)},WNTrigger.prototype.update=function(){var e=1e3;switch(this.aggression){case"hard":e=50;break;case"normal":e=100}1==Math.floor(Math.random()*e+1)&&this.gameObjects.length<maxObject&&this.gameObjects.push(new WN(this.cordinate))};var gameEngine,maxObject=70,map=getMap(),gameObjects=[],last={x:1,y:0},lastId=1,player=new Player,friends=[],pause=!0,startFlag=!1,chet=!1,shortMessage=new ShortMessage;function createTriggers(e){gameObjects.push(new WNTrigger(e,gameObjects,"normal"))}function addFriends(e,t){var i=getFriends()[e],a=new Friend(t,gameObjects);a.size=i.size,a.name=i.name,a.setImg(i.image),gameObjects.push(a),friends.push(a)}function createMap(){var e=document.createElement("canvas");e.width=map[0].length,e.height=map.length,gameContainer=document.getElementById("game_container"),gameContainer.append(e);for(var t=e.getContext("2d"),i=0;i<map.length;i++)for(var a=0;a<map[i].length;a++)t.fillStyle="#FFFFFF",1===map[i][a]?t.fillStyle="#000000":2===map[i][a]||11===map[i][a]||12===map[i][a]||13===map[i][a]||14===map[i][a]||15===map[i][a]?t.fillStyle="#8B4513":3===map[i][a]||7===map[i][a]||8===map[i][a]||9===map[i][a]||10===map[i][a]?t.fillStyle="#808080":6===map[i][a]?t.fillStyle="#FF0000":4===map[i][a]?t.fillStyle="#DADADA":t.fillStyle="rgba(0, 0, 0, 0)",t.fillRect(a,i,1,1),(6<map[i][a]||"string"==typeof map[i][a])&&addObjectObserve(a,i,map[i][a]);t.stroke()}function addObjectObserve(e,t,i){var a="";switch(i){case 7:case 16:a="chair chair-left";break;case 8:case 17:a="chair chair-right";break;case 9:case 18:a="chair chair-top";break;case 10:case 19:a="chair chair-bottom";break;case 11:a="computer computer-left";break;case 12:a="computer computer-right";break;case 13:a="computer computer-top";break;case 14:a="computer computer-bottom";break;case 15:a="flowers";break;case 20:a="car-model1";break;case 21:a="grass";break;case 22:a="floor2";break;case 23:a="toilet";break;case"trigger":a="speker",createTriggers({x:e,y:t});break;case"player":player.cordinate={x:e,y:t};break;case"hud":gameObjects.push(new Hud({x:e,y:t},friends,player));break;default:"string"==typeof i&&addFriends(i,{x:e,y:t})}if(""!=a){var s=document.createElement("div");s.className=a,s.style.left=e+"px",s.style.top=t+"px",document.getElementById("game_container").append(s)}}function gameUpdtaeEngine(){pause||updateObject(),gameEngine=setTimeout(function(){gameUpdtaeEngine()},40)}function KeyMapConfig(){window.onkeydown=function(e){if(startFlag){if(37==e.keyCode&&player.left(),39==e.keyCode&&player.right(),38==e.keyCode&&player.up(),40==e.keyCode&&player.down(),32==e.keyCode){var t={x:player.cordinate.x+player.size/2,y:player.cordinate.y+player.size/2};gameObjects.push(new Ball(t,player.movement,last)),player.addScore(-2)}65==e.keyCode&&(BombSound.active||gameObjects.push(new BombSound(player.cordinate,gameObjects)))}},window.onkeyup=function(e){startFlag&&(37==e.keyCode&&(last.x=-player.speed,last.y=0,player.movement.x=0),39==e.keyCode&&(last.x=player.speed,last.y=0,player.movement.x=0),38==e.keyCode&&(last.x=0,last.y=-player.speed,player.movement.y=0),40==e.keyCode&&(last.x=0,last.y=player.speed,player.movement.y=0),27==e.keyCode&&togleGame(),chet?5<(chet+=e.key).length?chet=!1:"ninja"==chet?chetGame():"end"==chet&&endGame():"n"==e.key?(chet="n",setTimeout(function(){chet=!1},1e4)):"e"==e.key&&(chet="e",setTimeout(function(){chet=!1},1e4)))}}function chetGame(){for(var e in player.speed=4,friends)friends.hasOwnProperty(e)&&(friends[e].count=1);alert("cheted")}function checkEndingGame(){var e=!0;for(var t in friends)friends.hasOwnProperty(t)&&(e=e&&friends[t].heal);e&&endGame()}function endGame(){pause=!0,clearTimeout(gameEngine);var e=document.getElementById("credit"),t=document.getElementById("credit_box");e.style.display="block";var i=document.createElement("audio");i.src="sound/end.mp3",i.play(),setTimeout(function(){t.className="credit-animate"},2e3)}function updateObject(){for(var t in gameObjects)if(gameObjects.hasOwnProperty(t)){if("trigger"==(t=gameObjects[t]).type||"hud"==t.type){t.update();continue}var i=[],e=t.cordinate.y+t.movement.y+(0<t.movement.y?t.size:0),a=t.cordinate.x+t.movement.x+(0<t.movement.x?t.size:0);try{if(1==map[Math.round(e)][Math.round(a)]||2==map[Math.round(e)][Math.round(a)]||void 0===map[Math.round(e)][Math.round(a)]){if("ball"==t.type)t.sound(["pse.wav"]),i.push(t),player.addScore(-1);else if("ai"==t.type||"friend"==t.type)t.update(!0);else if("player"==t.type)continue}else if("ball"==t.type){for(var s in gameObjects)if(gameObjects.hasOwnProperty(s)&&"ai"==gameObjects[s].type&&gameObjects[s].colider(a,e)){t.sound(["sa.wav"]),i.push(gameObjects[s]),i.push(t),player.addScore(15);break}}else if("bomb"==t.type)for(var s in gameObjects)gameObjects.hasOwnProperty(s)&&"ai"==gameObjects[s].type&&t.colider(gameObjects[s])&&(gameObjects[s].sound(["sa.wav"]),i.push(gameObjects[s]),player.addScore(5));else if("friend"==t.type)for(var n in friends)friends.hasOwnProperty(n)&&(n=friends[n],(t.colider(n.cordinate.x,n.cordinate.y)||n.colider(a,e))&&n!=t&&(t.update(!0),n.update(!0)));else if("ai"==t.type)for(var n in(t.colider(player.cordinate.x,player.cordinate.y)||player.colider(a,e))&&(t.sound(["fart-not clean.wav"]),i.push(t),player.addScore(-5)),friends)friends.hasOwnProperty(n)&&(n=friends[n],(t.colider(n.cordinate.x,n.cordinate.y)||n.colider(a,e))&&(i.push(t),n.heal||(player.addScore(-1),shortMessage.show(n.image.name)),n.fired()));else if("player"==t.type)for(var n in friends)friends.hasOwnProperty(n)&&(n=friends[n],(t.colider(n.cordinate.x,n.cordinate.y)||n.colider(a,e))&&(t.heal=n.updateHealPoint(t.heal),n.sound(["opa.wav"]),checkEndingGame()))}catch(e){"ball"==t.type?i.push(t):"ai"!=t.type&&"friend"!=t.type||t.update(!0)}for(var o in t.update(),i)i.hasOwnProperty(o)&&(i[o].remove(),gameObjects.splice(gameObjects.indexOf(i[o]),1))}}function togleGame(){var e=document.getElementById("ui");e.className=pause?"hide":"",pause=!pause}window.onload=function(){document.getElementById("start_btn").onclick=function(){startFlag=!0,document.getElementById("start_page").style.display="none"},document.getElementById("start_menu").onclick=function(){togleGame()},gameObjects.push(player),KeyMapConfig(),createMap(),gameUpdtaeEngine()};})();
